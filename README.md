# reaction-docs

üìù `reaction-docs` is the new static documentation generator for all Reaction Commerce projects.

## Requirements

- Node, 6.x and above
- Yarn
- Docker

## Stack

- [Docusaurus](https://github.com/facebook/docusaurus/), for static-site documentation generation
- Markdown for Docs
- React for components
- [highlight.js](https://github.com/isagalaev/highlight.js) for JavaScript, HTML, CSS, shell syntax highlighting
- [Prism.js](https://prismjs.com/) for JSX, GraphQL syntax highlighting
- [Algolia DocSearch](https://community.algolia.com/docsearch/)
- ESLint configured with Reaction Commerce eslint config
- LiveReload during development
- Docker

## Getting started

```
git clone git@github.com:reactioncommerce/reaction-docs.git
cd reaction-docs
bin/setup
docker-compose up
```

Open `localhost:4000`

## Documenting

1. Add a new Markdown file in `public-docs`.
1. At the start of the file, add the required frontmatter:
```md
---
id: doc2
title: document number 2
---
```
1. Add the Markdown file to the table of contents, at `website/sidebars.json`
1. The server uses LiveReload, so as soon as you save, you should see the changes at `localhost:4000`.

For more Markdown features, including autogenerated table of contents, refer to [Docusaurus docs](https://docusaurus.io/docs/en/doc-markdown.html).

### Adding images

Save the image in website/static/assets and reference it like this:

```md
![](/assets/admin-dashboard-tax-avalara.png "Reaction Dashboard - Avalara")
```

### Cross Linking

Reference other articles by their filename:

```md
Refer to the [FAQs](faqs.md) article
```

### Syntax highlighting

Supports `js`, `jsx`, `graphql`, `html`, `sh`, `git`, `yaml` and [more](https://github.com/reactioncommerce/reaction-docs-static/issues/47).

## Developing

The Header, Footer, index page and version pages are developed in React and CSS within the `website/core` and `website/static` directories. Site configuration details are managed in `website/siteConfig.js`.

### Logging

```sh
docker-compose up -d && docker-compose logs -f
```

### Linting

```sh
docker-compose run --rm web yarn lint
```

```sh
docker-compose run --rm web yarn lint:fix:eslint
```

### Running commands

`docker-compose run --rm web [...]` will run any command inside a Docker container and then remove the container.

### Restart

```sh
docker-compose run --rm web yarn install \
&& docker-compose down --rmi local \
&& docker-compose build \
&& docker-compose up
```

### Tests

Tests are stubbed out for now.

## Versioning

Add a new version

```sh
docker-compose run --rm web yarn run version <version>
```

Rename an existing version to a new name

```sh
docker-compose run --rm web yarn run rename-version <currentVersion> <newVersion>
```

See [Versioning guide](https://docusaurus.io/docs/en/1.1.4/versioning.html) for more.

## Deploying

### Merge to `staging` branch

Merging to `staging` will trigger a CircleCI build to https://reaction-docs-staging.reactioncommerce.com/

### Merge to `master` branch

Merging to `master` will trigger a CircleCI build to http://reaction-docs-production.netlify.com